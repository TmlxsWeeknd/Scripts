--// Services
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local player = Players.LocalPlayer

--// UI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "LuckHopperUI"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
pcall(function()
    gui.Parent = game:GetService("CoreGui")
end)
if not gui.Parent then
    gui.Parent = player:WaitForChild("PlayerGui")
end

--// Toggle Button
local toggle = Instance.new("TextButton")
toggle.Parent = gui
toggle.Size = UDim2.new(0, 200, 0, 50)
toggle.Position = UDim2.new(0, 20, 0, 100)
toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
toggle.TextScaled = true
toggle.Font = Enum.Font.SciFi
toggle.Text = "Luck Hopper: ON"
toggle.Draggable = true
toggle.Active = true

--// State
local enabled = true

toggle.MouseButton1Click:Connect(function()
	enabled = not enabled
	toggle.Text = enabled and "Luck Hopper: ON" or "Luck Hopper: OFF"
end)

--// Hopper Loop
task.spawn(function()
	while true do
		if enabled then
			local decorations = workspace:FindFirstChild("MapDecorations")
			local luckBoard = decorations and decorations:FindFirstChild("Luckboard")
			
			if luckBoard then
				toggle.Text = "Luck Found ✅"
				break
			else
				toggle.Text = "No Luck ❌ - Rejoining..."
				task.wait(1)
				pcall(function()
					TeleportService:Teleport(game.PlaceId)
				end)
			end
		end
		task.wait(5)
	end
end)
