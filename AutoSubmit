-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- UI Setup
local submitGui = Instance.new("ScreenGui")
submitGui.Name = "SubmitAllFruitsUI"
submitGui.ResetOnSpawn = false
submitGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local submitButton = Instance.new("TextButton")
submitButton.Size = UDim2.new(0, 160, 0, 40)
submitButton.Position = UDim2.new(0.5, 0, 0, -45) -- Correct center top
submitButton.AnchorPoint = Vector2.new(0.5, 0)
submitButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
submitButton.BackgroundTransparency = 0.5
submitButton.BorderColor3 = Color3.new(0, 0, 0)
submitButton.BorderMode = Enum.BorderMode.Outline
submitButton.AutoButtonColor = false
submitButton.Font = Enum.Font.SciFi
submitButton.TextSize = 18
submitButton.Text = "Submit All Fruits"
submitButton.TextColor3 = Color3.fromRGB(255, 165, 0)

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = submitButton

submitButton.Parent = submitGui

-- Fruits to detect
local targetFruits = {
	"Cauliflower",
	"Green Apple",
	"Avocado",
	"Banana",
	"Pineapple",
	"Kiwi",
	"Bell Pepper",
	"Prickly Pear",
	"Loquat",
	"Feijoa"
}

-- Helper to check if name contains exact fruit name
local function isTargetFruit(itemName)
	for _, fruit in ipairs(targetFruits) do
		if string.find(itemName, fruit, 1, true) then
			return true
		end
	end
	return false
end

-- Button logic
submitButton.MouseButton1Click:Connect(function()
	local backpack = LocalPlayer:WaitForChild("Backpack")

	for _, item in ipairs(backpack:GetChildren()) do
		if item:IsA("Tool") and isTargetFruit(item.Name) then
			item.Parent = LocalPlayer.Character
		end
	end

	spawn(function()
		local startTime = tick()
		while tick() - startTime < 30 do
			local args = { "SubmitHeldPlant" }
			local remote = ReplicatedStorage:WaitForChild("GameEvents"):WaitForChild("SummerHarvestRemoteEvent")
			if typeof(remote) == "Instance" and remote:IsA("RemoteEvent") then
				remote:FireServer(unpack(args))
			end
			wait(0.1)
		end
	end)
end)
