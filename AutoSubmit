-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- GUI Setup
local ui = Instance.new("ScreenGui")
ui.Name = "FruitSubmitUI"
ui.ResetOnSpawn = false
ui.Parent = PlayerGui

-- Submit Button
local submitFruitsButton = Instance.new("TextButton")
submitFruitsButton.Size = UDim2.new(0, 160, 0, 40)
submitFruitsButton.Position = UDim2.new(0.5, -80, 0, -35)
submitFruitsButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
submitFruitsButton.BackgroundTransparency = 0.5
submitFruitsButton.BorderColor3 = Color3.new(0, 0, 0)
submitFruitsButton.BorderMode = Enum.BorderMode.Outline
submitFruitsButton.AutoButtonColor = false
submitFruitsButton.Font = Enum.Font.SciFi
submitFruitsButton.TextSize = 18
submitFruitsButton.Text = "Submit All Fruits"
submitFruitsButton.TextColor3 = Color3.fromRGB(255, 165, 0)
submitFruitsButton.Parent = ui

-- UI Styling
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = submitFruitsButton

local outline = Instance.new("UIStroke")
outline.Color = Color3.new(0, 0, 0)
outline.Thickness = 1
outline.Parent = submitFruitsButton

-- Logic
local validFruits = {
	"Cauliflower",
	"Green Apple",
	"Avocado",
	"Banana",
	"Pineapple",
	"Kiwi",
	"Bell Pepper",
	"Prickly Pear",
	"Loquat",
	"Feijoa"
}

submitFruitsButton.MouseButton1Click:Connect(function()
	local Backpack = LocalPlayer:WaitForChild("Backpack")
	local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local remote = ReplicatedStorage:WaitForChild("GameEvents"):WaitForChild("SummerHarvestRemoteEvent")

	-- Move valid fruits to character
	for _, tool in ipairs(Backpack:GetChildren()) do
		if tool:IsA("Tool") then
			for _, fruit in ipairs(validFruits) do
				if string.sub(tool.Name, 1, #fruit) == fruit then
					tool.Parent = Character
					break
				end
			end
		end
	end

	-- Call remote for 10 seconds
	local start = tick()
	while tick() - start < 10 do
		pcall(function()
			remote:FireServer("SubmitHeldPlant")
		end)
		wait(0.1)
	end
end)
