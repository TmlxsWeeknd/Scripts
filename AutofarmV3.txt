-- Services
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

local PlaceId = game.PlaceId

-- Flags
local running = true
local hopperRunning = true
local autoBuyToggle = true
local autoSeedBuyToggle = true
local crashServerRunning = false

-- Skybox IDs
local bloodlitSkyboxIds = {
Â  Â  SkyboxBk = "rbxassetid://111321078595932",
Â  Â  SkyboxFt = "rbxassetid://95129324535672",
Â  Â  SkyboxLf = "rbxassetid://111970040506702",
Â  Â  SkyboxDn = "rbxassetid://82118430379285",
Â  Â  SkyboxRt = "rbxassetid://79353534175259",
Â  Â  SkyboxUp = "rbxassetid://84457327390960"
}

local nightSkyboxIds = {
Â  Â  SkyboxBk = "rbxassetid://135897169947130",
Â  Â  SkyboxFt = "rbxassetid://107905878941696",
Â  Â  SkyboxLf = "rbxassetid://91354764228778",
Â  Â  SkyboxRt = "rbxassetid://101750516482570",
Â  Â  SkyboxUp = "rbxassetid://123019651557734",
Â  Â  SkyboxDn = "rbxassetid://119785634988565"
}

-- UI Setup
local ui = Instance.new("ScreenGui")
ui.Name = "AutoFarmUI"
ui.ResetOnSpawn = false
ui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 180, 0, 260)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundTransparency = 1
frame.Parent = ui

local function createButton(text, posX, posY)
Â  Â  local btn = Instance.new("TextButton")
Â  Â  btn.Size = UDim2.new(0, 160, 0, 40)
Â  Â  btn.Position = UDim2.new(0, posX, 0, posY)
Â  Â  btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Â  Â  btn.BackgroundTransparency = 0.5
Â  Â  btn.BorderColor3 = Color3.new(0,0,0)
Â  Â  btn.BorderMode = Enum.BorderMode.Outline
Â  Â  btn.AutoButtonColor = false
Â  Â  btn.Font = Enum.Font.SourceSansBold
Â  Â  btn.TextSize = 18
Â  Â  btn.Text = text
Â  Â  btn.TextColor3 = Color3.new(1,1,1)

Â  Â  local corner = Instance.new("UICorner")
Â  Â  corner.CornerRadius = UDim.new(0, 8)
Â  Â  corner.Parent = btn

Â  Â  local outline = Instance.new("UIStroke")
Â  Â  outline.Color = Color3.new(0,0,0)
Â  Â  outline.Thickness = 1
Â  Â  outline.Parent = btn

Â  Â  local textStroke = Instance.new("UIStroke")
Â  Â  textStroke.Color = Color3.new(0,0,0)
Â  Â  textStroke.Thickness = 1
Â  Â  textStroke.Parent = btn

Â  Â  btn.Parent = frame
Â  Â  return btn
end

-- Left column buttons
local hopperButton = createButton("Hopper: ON", 10, 10)
local autoBuyButton = createButton("Auto Buy: ON", 10, 60)
local seedBuyButton = createButton("Seed Buy: ON", 10, 110)
local crashServerButton = createButton("Crash Server: OFF", 10, 160)
local managePetButton = createButton("Manage Pets List", 10, 210)

-- Top center buttons
local function createTopCenterButton(text, offsetX)
Â  Â  local btn = Instance.new("TextButton")
Â  Â  btn.Size = UDim2.new(0, 100, 0, 40)
Â  Â  btn.Position = UDim2.new(0.5, offsetX, 0, -45)
Â  Â  btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Â  Â  btn.BackgroundTransparency = 0.5
Â  Â  btn.BorderColor3 = Color3.new(0,0,0)
Â  Â  btn.BorderMode = Enum.BorderMode.Outline
Â  Â  btn.AutoButtonColor = false
Â  Â  btn.Font = Enum.Font.SourceSansBold
Â  Â  btn.TextSize = 18
Â  Â  btn.Text = text
Â  Â  btn.TextColor3 = Color3.new(1,1,1)

Â  Â  local corner = Instance.new("UICorner")
Â  Â  corner.CornerRadius = UDim.new(0, 8)
Â  Â  corner.Parent = btn

Â  Â  local outline = Instance.new("UIStroke")
Â  Â  outline.Color = Color3.new(0,0,0)
Â  Â  outline.Thickness = 1
Â  Â  outline.Parent = btn

Â  Â  local textStroke = Instance.new("UIStroke")
Â  Â  textStroke.Color = Color3.new(0,0,0)
Â  Â  textStroke.Thickness = 1
Â  Â  textStroke.Parent = btn

Â  Â  btn.Parent = ui
Â  Â  return btn
end

local minimizeButton = createTopCenterButton("Minimize", -110)
local closeButton = createTopCenterButton("Close GUI", 10)

-- Rainbow button text
spawn(function()
Â  Â  local step = 0
Â  Â  while running do
Â  Â  Â  Â  local hue = (step % 360) / 360
Â  Â  Â  Â  local color = Color3.fromHSV(hue, 1, 1)
Â  Â  Â  Â  for _, btn in ipairs({hopperButton, autoBuyButton, seedBuyButton, crashServerButton, managePetButton, minimizeButton, closeButton}) do
Â  Â  Â  Â  Â  Â  btn.TextColor3 = color
Â  Â  Â  Â  end
Â  Â  Â  Â  step = step + 3
Â  Â  Â  Â  wait(0.03)
Â  Â  end
end)

-- Button toggles
hopperButton.MouseButton1Click:Connect(function()
Â  Â  hopperRunning = not hopperRunning
Â  Â  hopperButton.Text = hopperRunning and "Hopper: ON" or "Hopper: OFF"
end)

autoBuyButton.MouseButton1Click:Connect(function()
Â  Â  autoBuyToggle = not autoBuyToggle
Â  Â  autoBuyButton.Text = autoBuyToggle and "Auto Buy: ON" or "Auto Buy: OFF"
end)

seedBuyButton.MouseButton1Click:Connect(function()
Â  Â  autoSeedBuyToggle = not autoSeedBuyToggle
Â  Â  seedBuyButton.Text = autoSeedBuyToggle and "Seed Buy: ON" or "Seed Buy: OFF"
end)

crashServerButton.MouseButton1Click:Connect(function()
Â  Â  crashServerRunning = not crashServerRunning
Â  Â  crashServerButton.Text = crashServerRunning and "Crash Server: ON" or "Crash Server: OFF"
end)

managePetButton.MouseButton1Click:Connect(function()
Â  Â  local petUI = LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("ActivePetUI")
Â  Â  if petUI then
Â  Â  Â  Â  local frame = petUI:FindFirstChild("Frame")
Â  Â  Â  Â  if frame then
Â  Â  Â  Â  Â  Â  local main = frame:FindFirstChild("Main")
Â  Â  Â  Â  Â  Â  if main then
Â  Â  Â  Â  Â  Â  Â  Â  local opener = main:FindFirstChild("Opener")
Â  Â  Â  Â  Â  Â  Â  Â  if opener then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opener.Visible = not opener.Visible
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  petUI.Enabled = true
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
end)

minimizeButton.MouseButton1Click:Connect(function()
Â  Â  if frame.Visible then
Â  Â  Â  Â  frame.Visible = false
Â  Â  Â  Â  minimizeButton.Text = "Maximize"
Â  Â  else
Â  Â  Â  Â  frame.Visible = true
Â  Â  Â  Â  minimizeButton.Text = "Minimize"
Â  Â  end
end)

closeButton.MouseButton1Click:Connect(function()
Â  Â  running = false
Â  Â  ui:Destroy()
end)

-- Auto Buy
spawn(function()
Â  Â  local items = {"Chocolate Carrot", "Red Lollipop", "Candy Sunflower", "Easter Egg", "Chocolate Sprinkler", "Candy Blossom"}
Â  Â  while running do
Â  Â  Â  Â  if autoBuyToggle then
Â  Â  Â  Â  Â  Â  for _, item in ipairs(items) do
Â  Â  Â  Â  Â  Â  Â  Â  pcall(function()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ReplicatedStorage:WaitForChild("GameEvents"):WaitForChild("BuyEventShopStock"):FireServer(item)
Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  Â  Â  wait()
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  Â  Â  wait(0.1)
Â  Â  end
end)

-- Seed Buy
spawn(function()
Â  Â  local seeds = {"Beanstalk", "Grape", "Pepper", "Cacao"}
Â  Â  while running do
Â  Â  Â  Â  if autoSeedBuyToggle then
Â  Â  Â  Â  Â  Â  for _, seed in ipairs(seeds) do
Â  Â  Â  Â  Â  Â  Â  Â  pcall(function()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ReplicatedStorage:WaitForChild("GameEvents"):WaitForChild("BuySeedStock"):FireServer(seed)
Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  Â  Â  wait()
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  Â  Â  wait(0.1)
Â  Â  end
end)

-- Crash Server (Tool Flicker)
spawn(function()
Â  Â  while running do
Â  Â  Â  Â  if crashServerRunning then
Â  Â  Â  Â  Â  Â  local backpack = LocalPlayer:WaitForChild("Backpack")
Â  Â  Â  Â  Â  Â  local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

Â  Â  Â  Â  Â  Â  for _, tool in ipairs(backpack:GetChildren()) do
Â  Â  Â  Â  Â  Â  Â  Â  if tool:IsA("Tool") then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tool.Parent = character
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end

Â  Â  Â  Â  Â  Â  wait(0.1)

Â  Â  Â  Â  Â  Â  for _, tool in ipairs(character:GetChildren()) do
Â  Â  Â  Â  Â  Â  Â  Â  if tool:IsA("Tool") then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tool.Parent = backpack
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end

Â  Â  Â  Â  Â  Â  wait(0.1)
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  wait(0.2)
Â  Â  Â  Â  end
Â  Â  end
end)

-- Skybox check
local function matchesSkybox(sky, target)
Â  Â  for key, id in pairs(target) do
Â  Â  Â  Â  local val = sky[key]
Â  Â  Â  Â  if not val or string.lower(val) ~= string.lower(id) then
Â  Â  Â  Â  Â  Â  return false
Â  Â  Â  Â  end
Â  Â  end
Â  Â  return true
end

local function isBloodmoon()
Â  Â  local sky = Lighting:FindFirstChildWhichIsA("Sky")
Â  Â  return sky and matchesSkybox(sky, bloodlitSkyboxIds)
end

-- Server Hop Improved
local lastHopAttempt = 0
local function Notify(title, text)
Â  Â  game.StarterGui:SetCore("SendNotification", {
Â  Â  Â  Â  Title = title,
Â  Â  Â  Â  Text = text,
Â  Â  Â  Â  Duration = 5
Â  Â  })
end

local function serverHop()
Â  Â  if os.time() - lastHopAttempt < 5 then
Â  Â  Â  Â  Notify("Please Wait", "Server hop cooldown...")
Â  Â  Â  Â  return false
Â  Â  end
Â  Â  lastHopAttempt = os.time()

Â  Â  local req = (syn and syn.request) or (http and http.request) or http_request or (fluxus and fluxus.request) or request
Â  Â  if not req then
Â  Â  Â  Â  Notify("Error", "No HTTP request function available")
Â  Â  Â  Â  return false
Â  Â  end
Â  Â  task.wait(math.random(1, 3))

Â  Â  local res = req({
Â  Â  Â  Â  Url = ("https://games.roblox.com/v1/games/%s/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true"):format(PlaceId),
Â  Â  Â  Â  Method = "GET"
Â  Â  })

Â  Â  if res.StatusCode == 429 then
Â  Â  Â  Â  Notify("Rate Limited", "Please wait a few minutes before trying again")
Â  Â  Â  Â  return false
Â  Â  elseif res.StatusCode ~= 200 then
Â  Â  Â  Â  Notify("Error", "Server request failed (Code: "..res.StatusCode..")")
Â  Â  Â  Â  return false
Â  Â  end

Â  Â  local success, data = pcall(HttpService.JSONDecode, HttpService, res.Body)
Â  Â  if not success or not data or not data.data then
Â  Â  Â  Â  Notify("Error", "Failed to read server data")
Â  Â  Â  Â  return false
Â  Â  end

Â  Â  local list = {}
Â  Â  for _, v in ipairs(data.data) do
Â  Â  Â  Â  if type(v) == "table" and v.id ~= game.JobId then
Â  Â  Â  Â  Â  Â  local playing = tonumber(v.playing) or 0
Â  Â  Â  Â  Â  Â  local max = tonumber(v.maxPlayers) or 100
Â  Â  Â  Â  Â  Â  if playing < max then
Â  Â  Â  Â  Â  Â  Â  Â  table.insert(list, v.id)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end

Â  Â  if #list > 0 then
Â  Â  Â  Â  Notify("Server Hop", "Teleporting to better server...")
Â  Â  Â  Â  task.wait(0.5)
Â  Â  Â  Â  TeleportService:TeleportToPlaceInstance(PlaceId, list[math.random(#list)], LocalPlayer)
Â  Â  Â  Â  return true
Â  Â  else
Â  Â  Â  Â  Notify("No Servers", "No available servers found")
Â  Â  Â  Â  return false
Â  Â  end
end

spawn(function()
Â  Â  wait(15)
Â  Â  while running do
Â  Â  Â  Â  if hopperRunning then
Â  Â  Â  Â  Â  Â  if isBloodmoon() then
Â  Â  Â  Â  Â  Â  Â  Â  print("ðŸŒ• Bloodmoon detected! Staying for 17 minutes...")
Â  Â  Â  Â  Â  Â  Â  Â  wait(1020)
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  local success, err = pcall(serverHop)
Â  Â  Â  Â  Â  Â  Â  Â  if not success then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  print("Server hop error:", err)
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  wait(15)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  wait(1)
Â  Â  Â  Â  end
Â  Â 
 end
end)

-- Anti-idle
spawn(function()
Â  Â  local vu = game:GetService("VirtualUser")
Â  Â  Players.LocalPlayer.Idled:Connect(function()
Â  Â  Â  Â  if not running then return end
Â  Â  Â  Â  vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
Â  Â  Â  Â  wait(1)
Â  Â  Â  Â  vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
Â  Â  end)
end)
